function uptoken(n,e){var i=new qiniu.rs.PutPolicy(n+":"+e);return i.token()}function uploadFile(n,e,i){var o=new qiniu.io.PutExtra;qiniu.io.putFile(n,e,i,o,function(n,e){n?console.log(n):console.log("upload success : ",e.hash,e.key)})}function getFilenameSuffix(n){if(".DS_Store"==n)return".DS_Store";if(null==n||0==n.length)return null;var e=/\.[^\.]+/.exec(n);return null==e?null:(e+"").toLowerCase()}const fs=require("fs"),path="../../dist/images";var qiniu=require("qiniu");qiniu.conf.ACCESS_KEY="zeDw8a27RIDTr9PLkYZeqDZuB0Ruw4WqJ5uiAsz8",qiniu.conf.SECRET_KEY="WpqSk-iE5gVh_nwxrEzJW0EGqY2n9r67774KXRwH",bucket="hexo",fs.readdir(path,function(n,e){if(n)return void console.log(n);var i=[];!function o(n){return n==e.length?(fs.unlink("./output.json",function(n){n&&console.log(n)}),void fs.writeFile("./output.json",JSON.stringify(i,null,"	"))):void fs.stat(path+"/"+e[n],function(u,t){if(!u){if(t.isFile()){var l=getFilenameSuffix(e[n]);".js"!=l&&".DS_Store"!=l&&(filePath=path+"/"+e[n],console.log("抓取到文件: "+e[n]),key=e[n],token=uptoken(bucket,key),uploadFile(token,key,filePath),i.push(e[n]))}o(n+1)}})}(0)});